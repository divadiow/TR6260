/*******************************************************************************
 * Copyright by Transa Semi.
 *
 * File Name: pcu.c   
 * File Mark:    
 * Description:  
 * Others:        
 * Version:       v0.1
 * Author:        wangc
 * Date:          2019-1-21
 * History 1:      
 *     Date: 
 *     Version:
 *     Author: 
 *     Modification:  
 * History 2: 
  ********************************************************************************/

/****************************************************************************
* 	                                           Include files
****************************************************************************/
#include "soc_top_reg.h"
#include "pcu.h"

/****************************************************************************
* 	                                           Local Macros
****************************************************************************/

#define SHUTDOWN_PASSWORD			0x55aa

#define SOC_PCU_SHUTDOWN_CHIP  		SOC_PCU_REG_BASE+0x8
#define SOC_PCU_SHUTDOWN_PASSWORD  	SOC_PCU_REG_BASE+0x34
/****************************************************************************
* 	                                           Local Types
****************************************************************************/

/****************************************************************************
* 	                                           Local Constants
****************************************************************************/

/****************************************************************************
* 	                                           Local Function Prototypes
****************************************************************************/

/****************************************************************************
* 	                                          Global Constants
****************************************************************************/

/****************************************************************************
* 	                                          Global Variables
****************************************************************************/

/****************************************************************************
* 	                                          Global Function Prototypes
****************************************************************************/

/****************************************************************************
* 	                                          Function Definitions
****************************************************************************/

/*******************************************************************************
 * Function: pcu_shutdonw_chip
 * Description: 
 * Parameters: 
 *   Input:
 *
 *   Output:
 *
 * Returns: 
 *
 *
 * Others: 
 ********************************************************************************/
 void pcu_shutdonw_chip(void)
{
	*( (volatile unsigned int *) (SOC_PCU_SHUTDOWN_PASSWORD) ) = SHUTDOWN_PASSWORD;
	*( (volatile unsigned int *) (SOC_PCU_SHUTDOWN_CHIP) ) = 1;
}



#if 0
#include "system_common.h"

static int cmd_shutdown(cmd_tbl_t *t, int argc, char *argv[])
{
	pcu_shutdonw_chip();
	system_printf("cmd_shutdown\n");
	return CMD_RET_SUCCESS;
}

CMD(sd,
    cmd_shutdown,
    "cmd_shutdown",
    "sd cmd_shutdown");



#endif
